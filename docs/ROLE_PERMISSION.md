# WORKB Mobile - ì—­í•  ë° ê¶Œí•œ êµ¬ì¡°

## ê°œìš”

ëª¨ë°”ì¼ ì•±ì˜ ì—­í•  ì²´ê³„ëŠ” ë°±ì—”ë“œ HR ì‹œìŠ¤í…œ(`codeb_project-main/src/types/hr.ts`)ê³¼ ë™ê¸°í™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤.

```typescript
// src/types/index.ts
export type UserRole = 'admin' | 'hr' | 'manager' | 'employee';
```

---

## ì—­í•  ì •ì˜

| ì—­í•  | í•œê¸€ëª… | ì„¤ëª… |
|------|--------|------|
| `admin` | ìµœê³ ê´€ë¦¬ì | ì›Œí¬ìŠ¤í˜ì´ìŠ¤ ì „ì²´ ê´€ë¦¬ ê¶Œí•œ |
| `hr` | HR ë‹´ë‹¹ì | ì¸ì‚¬/ê·¼íƒœ/íœ´ê°€ ê´€ë¦¬ ê¶Œí•œ |
| `manager` | ë§¤ë‹ˆì € | íŒ€ ë‹¨ìœ„ ê´€ë¦¬ ê¶Œí•œ |
| `employee` | ì§ì› | ë³¸ì¸ ê¸°ëŠ¥ë§Œ ì‚¬ìš© ê°€ëŠ¥ |

---

## ì•± vs ì›¹ ì–´ë“œë¯¼ ê¸°ëŠ¥ ë¶„ë¦¬

### í•µì‹¬ ì›ì¹™

1. **ëª¨ë°”ì¼ = ë§¤ì¼ ì“°ëŠ” í•„ìˆ˜ ê¸°ëŠ¥ë§Œ**
2. **ìŠ¹ì¸ì€ í‘¸ì‹œ ì•Œë¦¼ ê¸°ë°˜**: ì•Œë¦¼ â†’ ì•±ì—ì„œ ë¹ ë¥´ê²Œ ìŠ¹ì¸/ë°˜ë ¤
3. **ë³µì¡í•œ ì„¤ì •ì€ ì›¹ìœ¼ë¡œ**: "ìì„¸í•œ ì„¤ì •ì€ ì›¹ì—ì„œ ê´€ë¦¬í•˜ì„¸ìš”" ì•ˆë‚´

### ì›¹ ì–´ë“œë¯¼ ì „ìš© (ì•±ì—ì„œ ì œì™¸)

| ê¸°ëŠ¥ | ì„¤ëª… |
|------|------|
| âš™ï¸ ê·¼ë¬´ ì •ì±… ì„¤ì • | ê·¼ë¬´ ì‹œê°„, ìœ ì—°ê·¼ë¬´, ì½”ì–´íƒ€ì„ ë“± |
| âš™ï¸ íœ´ê°€ ì •ì±… ì„¤ì • | ì—°ì°¨ ë°œìƒ ê¸°ì¤€, ì´ì›” ê·œì • ë“± |
| âš™ï¸ ê¸‰ì—¬ ì„¤ì • | ê¸‰ì—¬ ê³„ì‚°, ìˆ˜ë‹¹/ê³µì œ ì„¤ì • |
| ğŸ‘¥ ì§ì› ì´ˆëŒ€/ì‚­ì œ | ì‹ ê·œ ì§ì› ì´ˆëŒ€, í‡´ì‚¬ ì²˜ë¦¬ |
| ğŸ‘¥ ì—­í•  ë³€ê²½ | ì§ì› ê¶Œí•œ ë³€ê²½ |
| ğŸ“Š ìƒì„¸ í†µê³„/ë¦¬í¬íŠ¸ | ê·¼íƒœ ë¶„ì„, íœ´ê°€ í†µê³„ |
| ğŸ“Š ê¸‰ì—¬ ê´€ë¦¬ | ê¸‰ì—¬ ëª…ì„¸ì„œ, ê¸‰ì—¬ ì§€ê¸‰ |

### ëª¨ë°”ì¼ ì•± ê¸°ëŠ¥

| ê¸°ëŠ¥ | employee | admin/hr/manager |
|------|----------|------------------|
| **ì¶œí‡´ê·¼** | ë³¸ì¸ âœ… | ë³¸ì¸ âœ… |
| **ê·¼ë¬´ ê¸°ë¡ ì¡°íšŒ** | ë³¸ì¸ âœ… | ë³¸ì¸ âœ… |
| **ê·¼íƒœ ì •ì • ìš”ì²­** | ìš”ì²­ âœ… | ìš”ì²­ âœ… |
| **íœ´ê°€ ì‹ ì²­** | ì‹ ì²­ âœ… | ì‹ ì²­ âœ… |
| **íœ´ê°€ ì”ì—¬ í™•ì¸** | ë³¸ì¸ âœ… | ë³¸ì¸ âœ… |
| **ê²Œì‹œíŒ ì¡°íšŒ** | âœ… | âœ… |
| **ê²Œì‹œíŒ ì‘ì„±** | âŒ | âœ… |
| **í”„ë¡œí•„ ìˆ˜ì •** | âœ… | âœ… |
| **ì•Œë¦¼ ì„¤ì •** | âœ… | âœ… |
| --- | --- | --- |
| **íœ´ê°€ ìŠ¹ì¸/ë°˜ë ¤** | âŒ | âœ… (ì•Œë¦¼ â†’ ë¹ ë¥¸ ì²˜ë¦¬) |
| **ê·¼íƒœ ì •ì • ìŠ¹ì¸/ë°˜ë ¤** | âŒ | âœ… (ì•Œë¦¼ â†’ ë¹ ë¥¸ ì²˜ë¦¬) |
| **ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡** | âŒ | âœ… (ë±ƒì§€/ì¹´ìš´íŠ¸) |

---

## ì•± í™”ë©´ë³„ ê¶Œí•œ êµ¬ì„±

### HomeScreen

```
ëª¨ë“  ì—­í• :
â”œâ”€â”€ ì¶œí‡´ê·¼ ë²„íŠ¼
â”œâ”€â”€ ì˜¤ëŠ˜ ê·¼ë¬´ ì‹œê°„
â””â”€â”€ ì´ë²ˆ ì£¼ ê·¼ë¬´ í˜„í™©

ê´€ë¦¬ì(admin/hr/manager) ì¶”ê°€:
â””â”€â”€ ğŸ”” ìŠ¹ì¸ ëŒ€ê¸° ë±ƒì§€ (ìˆ«ìë§Œ í‘œì‹œ, íƒ­í•˜ë©´ ëª©ë¡ìœ¼ë¡œ ì´ë™)
```

### SettingsScreen

```
ëª¨ë“  ì—­í• :
â”œâ”€â”€ ë‚´ í”„ë¡œí•„
â”œâ”€â”€ ê·¼ë¬´ ê¸°ë¡
â”œâ”€â”€ ê·¼íƒœ ì •ì • ìš”ì²­
â”œâ”€â”€ ì•Œë¦¼ ì„¤ì •
â”œâ”€â”€ ì•± ì •ë³´ (ë²„ì „, ì´ìš©ì•½ê´€, ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨)
â””â”€â”€ ë¡œê·¸ì•„ì›ƒ

ê´€ë¦¬ì(admin/hr/manager) ì¶”ê°€:
â”œâ”€â”€ âœ… ìŠ¹ì¸ ê´€ë¦¬ (íœ´ê°€/ê·¼íƒœì •ì • ìŠ¹ì¸ ëŒ€ê¸° ëª©ë¡)
â””â”€â”€ ğŸ’¡ "ìì„¸í•œ ì„¤ì •ì€ ì›¹ì—ì„œ ê´€ë¦¬í•˜ì„¸ìš”" ì•ˆë‚´ ë°°ë„ˆ
```

### LeaveScreen

```
ëª¨ë“  ì—­í• :
â”œâ”€â”€ íœ´ê°€ ì‹ ì²­ ë²„íŠ¼
â”œâ”€â”€ ë‚´ ì”ì—¬ íœ´ê°€ í˜„í™©
â””â”€â”€ ë‚´ ì‹ ì²­ ë‚´ì—­

ê´€ë¦¬ì(admin/hr/manager) ì¶”ê°€:
â””â”€â”€ ğŸ“‹ ìŠ¹ì¸ ëŒ€ê¸° íƒ­ (ê°„ë‹¨í•œ ìŠ¹ì¸/ë°˜ë ¤ ì•¡ì…˜)
```

### NoticesScreen (ê²Œì‹œíŒ)

```
ëª¨ë“  ì—­í• :
â””â”€â”€ ê²Œì‹œê¸€ ì¡°íšŒ

ê´€ë¦¬ì(admin/hr/manager) ì¶”ê°€:
â”œâ”€â”€ âœï¸ ê¸€ì“°ê¸° FAB
â”œâ”€â”€ ğŸ“Œ ê³ ì •/í•´ì œ
â””â”€â”€ ğŸ—‘ï¸ ì‚­ì œ
```

---

## ë°±ì—”ë“œ RBAC êµ¬ì¡° (ì°¸ì¡°ìš©)

ë°±ì—”ë“œëŠ” ëª¨ë“ˆë³„ ì„¸ë¶€ ê¶Œí•œì„ ì •ì˜í•©ë‹ˆë‹¤ (`hr.ts`):

```typescript
export interface RBACPermission {
  module: 'ATTENDANCE' | 'LEAVE' | 'PAYROLL' | 'HR_RECORD' | 'SETTINGS' | 'APPROVAL';
  actions: ('VIEW' | 'CREATE' | 'EDIT' | 'DELETE' | 'APPROVE')[];
}
```

### ëª¨ë“ˆë³„ ê¶Œí•œ ë§¤íŠ¸ë¦­ìŠ¤

| ëª¨ë“ˆ | admin | hr | manager | employee |
|------|-------|-----|---------|----------|
| **ATTENDANCE** | ì „ì²´ CRUD + ìŠ¹ì¸ | ì „ì²´ CRUD + ìŠ¹ì¸ | íŒ€ì› VIEW + ìŠ¹ì¸ | ë³¸ì¸ë§Œ |
| **LEAVE** | ì „ì²´ CRUD + ìŠ¹ì¸ | ì „ì²´ CRUD + ìŠ¹ì¸ | íŒ€ì› VIEW + ìŠ¹ì¸ | ë³¸ì¸ ì‹ ì²­ë§Œ |
| **PAYROLL** | ì „ì²´ CRUD | VIEWë§Œ | âŒ | âŒ |
| **HR_RECORD** | ì „ì²´ CRUD | ì „ì²´ CRUD | íŒ€ì› VIEW | âŒ |
| **SETTINGS** | ì „ì²´ CRUD | ì¼ë¶€ CRUD | VIEWë§Œ | âŒ |
| **APPROVAL** | ì „ì²´ | ì „ì²´ | íŒ€ì›ë§Œ | âŒ |

---

## í˜„ì¬ êµ¬í˜„ ìƒíƒœ

### ë‹¨ìˆœí™”ëœ ê¶Œí•œ ì²´í¬

í˜„ì¬ëŠ” `isAdmin` í”Œë˜ê·¸ë¡œ ë‹¨ìˆœí™”ë˜ì–´ ìˆìŠµë‹ˆë‹¤:

```typescript
// employee ì™¸ ëª¨ë“  ì—­í• ì„ ê´€ë¦¬ìë¡œ ì·¨ê¸‰
const isAdmin = user?.role === 'admin' || user?.role === 'hr' || user?.role === 'manager';
```

### ë‹¨ìˆœí™” ì´ìœ 

1. **íŒ€(team) ê°œë… ë¯¸êµ¬í˜„**: ëª¨ë°”ì¼ì— íŒ€ êµ¬ì¡°ê°€ ì•„ì§ ì—†ìŒ
2. **ì„¸ë¶€ ê¶Œí•œ API ë¯¸ì—°ë™**: ë°±ì—”ë“œ RBAC APIì™€ ì—°ë™ë˜ì§€ ì•ŠìŒ
3. **MVP ìš°ì„ **: ë¹ ë¥¸ ê°œë°œì„ ìœ„í•´ ê´€ë¦¬ì/ì§ì› 2ë¶„ë¥˜ë¡œ ì‹œì‘

### ì ìš©ëœ íŒŒì¼

- `src/app/screens/HomeScreen.tsx` - isAdmin ì²´í¬
- `src/app/screens/NoticesScreen.tsx` - isAdmin ì²´í¬
- `src/app/screens/ProfileScreen.tsx` - ì—­í•  í‘œì‹œ
- `src/app/screens/SettingsScreen.tsx` - ê´€ë¦¬ì ë©”ë‰´ í‘œì‹œ
- `src/app/screens/LeaveScreen.tsx` - ìŠ¹ì¸ íƒ­ í‘œì‹œ

---

## í–¥í›„ ì„¸ë¶„í™” ê³„íš

### Phase 1: ê¸°ëŠ¥ë³„ ê¶Œí•œ í—¬í¼ í•¨ìˆ˜

```typescript
// src/utils/permissions.ts

import { User } from '@/types';

// ìŠ¹ì¸ ê¶Œí•œ (íœ´ê°€/ê·¼íƒœì •ì •)
export const canApprove = (user: User | null): boolean => {
  return user?.role === 'admin' || user?.role === 'hr' || user?.role === 'manager';
};

// ê²Œì‹œíŒ ì‘ì„± ê¶Œí•œ
export const canWriteNotice = (user: User | null): boolean => {
  return user?.role === 'admin' || user?.role === 'hr' || user?.role === 'manager';
};

// í–¥í›„ íŒ€ êµ¬ì¡° êµ¬í˜„ ì‹œ í™•ì¥
export const canApproveForUser = (user: User | null, targetUserId?: string): boolean => {
  if (!user) return false;
  if (user.role === 'admin' || user.role === 'hr') return true;
  if (user.role === 'manager') {
    // TODO: íŒ€ì› ì—¬ë¶€ í™•ì¸ ë¡œì§
    return isTeamMember(user.teamId, targetUserId);
  }
  return false;
};
```

### Phase 2: íŒ€ êµ¬ì¡° êµ¬í˜„

```typescript
// User íƒ€ì…ì— íŒ€ ì •ë³´ ì¶”ê°€
export interface User {
  // ... ê¸°ì¡´ í•„ë“œ
  teamId?: string;
  teamName?: string;
  teamMembers?: string[]; // managerì¸ ê²½ìš° íŒ€ì› ID ëª©ë¡
}
```

### Phase 3: ë°±ì—”ë“œ RBAC ì—°ë™

```typescript
// ë°±ì—”ë“œì—ì„œ ê¶Œí•œ ì •ë³´ ì¡°íšŒ
interface UserPermissions {
  modules: {
    [key: string]: ('VIEW' | 'CREATE' | 'EDIT' | 'DELETE' | 'APPROVE')[];
  };
  teamScope?: string[]; // managerì¸ ê²½ìš° ê´€ë¦¬ ê°€ëŠ¥í•œ íŒ€ì› ID
}
```

---

## êµ¬í˜„ ìš°ì„ ìˆœìœ„

| ìš°ì„ ìˆœìœ„ | ì‘ì—… | ì˜ì¡´ì„± |
|---------|------|--------|
| **P1** | SettingsScreen ê´€ë¦¬ì ë©”ë‰´ ì¶”ê°€ | ì—†ìŒ |
| **P1** | HomeScreen ìŠ¹ì¸ ëŒ€ê¸° ë±ƒì§€ | ì—†ìŒ |
| **P1** | LeaveScreen ìŠ¹ì¸ íƒ­ ì¶”ê°€ | ì—†ìŒ |
| **P2** | íœ´ê°€ ìŠ¹ì¸/ë°˜ë ¤ API ì—°ë™ | ë°±ì—”ë“œ API |
| **P2** | ê·¼íƒœ ì •ì • ìŠ¹ì¸/ë°˜ë ¤ API ì—°ë™ | ë°±ì—”ë“œ API |
| **P3** | íŒ€ êµ¬ì¡° êµ¬í˜„ | ë°±ì—”ë“œ íŒ€ API |
| **P3** | ê¶Œí•œ í—¬í¼ í•¨ìˆ˜ ì„¸ë¶„í™” | íŒ€ êµ¬ì¡° |

---

## ê´€ë ¨ íŒŒì¼

- **íƒ€ì… ì •ì˜**: `src/types/index.ts`
- **ë°±ì—”ë“œ ì°¸ì¡°**: `codeb_project-main/src/types/hr.ts`
- **ë°±ì—”ë“œ ê¶Œí•œ**: `codeb_project-main/src/types/employee.ts`
- **ë¼ìš°íŠ¸ ê°€ë“œ**: `codeb_project-main/src/hooks/useRouteGuard.ts`

---

## ë³€ê²½ ì´ë ¥

| ë‚ ì§œ | ë³€ê²½ ë‚´ìš© |
|------|----------|
| 2025-01-XX | ì´ˆê¸° ë¬¸ì„œ ì‘ì„± |
| 2025-01-XX | ì—­í•  ì²´ê³„ ë°±ì—”ë“œ ë™ê¸°í™” (owner/leader/member â†’ admin/hr/manager/employee) |
| 2025-01-XX | ì•±/ì›¹ ê¸°ëŠ¥ ë¶„ë¦¬ ì›ì¹™ ì¶”ê°€, í™”ë©´ë³„ êµ¬ì„± ê°„ì†Œí™” |
